<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <script src="al.js"></script>
    <script>
    
var agent = {
	pos: new vec2(0.5, 0.5),
	dir: new vec2(0.01, 0),
	size: 1/40
};  

function update() {
	agent.dir.rotate(0.5*(random()-0.5));
	//console.log(dir);
	agent.pos.add(agent.dir).wrap(1);
}

function draw() {
	draw2D.push()
		.translate(agent.pos)
		.rotate(agent.dir)
		.scale(agent.size);
		draw2D.color("pink");
		draw2D.rect();
		draw2D.color("white");
		draw2D.circle([0.5,  0.5], 0.5);
		draw2D.circle([0.5, -0.5], 0.5);
	draw2D.pop();
}  

v = new vec2(1, 1);
v0 = vec2.create();
v1 = vec2.random();
v2 = vec2.random();

/*
// create a new field:
var field = new field2D(128);

// initialize with some noise:
field.set(function(x, y) {
  return random(2);
});

// duplicate the field for double-buffering:
past = field.clone();

// the game of life rule:
function game(x, y) {
  // neighbourhood:
  var N = past.get(x, y + 1);
  var E = past.get(x + 1, y);
  var S = past.get(x, y - 1);
  var W = past.get(x - 1, y);
  var NE = past.get(x + 1, y + 1);
  var SE = past.get(x + 1, y - 1);
  var SW = past.get(x - 1, y - 1);
  var NW = past.get(x - 1, y + 1);
  var near = N + S + E + W + NW + SW + NE + SE;
  // current state:
  var C = past.get(x, y);
  // transition rule:
  // if alive:
  if (C == 1) {
    if (near < 2) {
      // die by loneliness:
      return 0;
    } else if (near > 3) {
      // die by overcrowding:
      return 0;
    }
  } else if (C == 0) {
    // if dead, rebirth by three neighbours:
    if (near == 3) {
      return 1;
    }
  }
  // else remain the same:
  return C;
}

// update the simulation (called frequently!)
function update() {
  // swap the buffers (cheaper than copying)
  var tmp = past;
  past = field;
  field = tmp;

   // run the game one step:
  field.set(game);
}

// render the simulation (called frequently!)
function draw() {
	draw2D.color(0, 1, 0);
	field.draw();

	draw2D.texture(field);
	draw2D.color(1, 1, 1, 1);
	draw2D.circle(0.5, 0.5, 0.5);
}

function mouse(event, point) {
	console.log(event, point);
}

function key(event, key) {
	console.log(event, key);
}
*/
    </script>
  </body>
</html>