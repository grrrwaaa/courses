<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <script src="al.js"></script>
    <script>

a = { 
	x: [1, vec2.random()], 
	f: new field2D(2),
}
a.f.set(function(r, c) { return random(); });


serialize = {
	vec2: true,
	field2D: function(o) {
		var f1 = o.clone();
		f1.array = Array.prototype.slice.call(f1.array);
		return f1;
	},
};

deserialize = {
	vec2: function(o) {
		return new vec2(o[0], o[1]);
	},
	field2D: function(o) {
		var b = new field2D(o.width, o.height);
		b.smooth = o.smooth;
		b.array.set(o.array);
		return b;
	}
};

function save() { 
	console.log("save:", a);
	return a; 
}

function load(data) {
	console.log("load:", data);
	a = data;

	save();
}

function draw() {
	a.f.draw();
}
    
console.log("ok");
    </script>
  </body>
</html>